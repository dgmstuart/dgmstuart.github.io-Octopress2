
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>dgms code</title>
  <meta name="author" content="Duncan Stuart">

  
  <meta name="description" content="I&rsquo;m at Bath Ruby 2015, live blogging some of the
talks Live coding!
Code for sending mail to a list of recipients based on a csv
Problems: Will &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dgmstuart.github.io/posts/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="dgms code" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44436648-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">dgms code</a></h1>
  
    <h2>A dev blog: mostly Ruby on Rails with a little WordPress</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/13/ben-orenstein-live-coding-in-the-bath-at-bathruby/">Ben Orenstein: Live Coding in the Bath at BathRuby</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-13T10:34:52+00:00" pubdate data-updated="true">Mar 13th, 2015</time>
        
           | <a href="/blog/2015/03/13/ben-orenstein-live-coding-in-the-bath-at-bathruby/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/13/ben-orenstein-live-coding-in-the-bath-at-bathruby/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://2015.bathruby.org/">Bath Ruby 2015</a>, live blogging some of the
talks</em></p>

<ul>
<li>Live coding!</li>
<li>Code for sending mail to a list of recipients based on a csv</li>
<li>Problems:

<ul>
<li>Will fail if one of the recipients fails to get parsed</li>
<li>CSV should get injected as a dependency rather than bring parsed in this
class.</li>
<li>Class has multiple responsibilities: parsing and mailing</li>
</ul>
</li>
<li>TDD: Should take very little time and effort to run tests (his are two
keystrokes and no time)</li>
<li><p>an &lsquo;extract class&rsquo; refactoring:</p>

<ol>
<li>add the class we  want in the initialiser</li>
<li>create an empty spec</li>
<li>create the class</li>
</ol>
</li>
<li><p><code>CSV::strip_heredoc</code> - Look up</p></li>
<li>Don&rsquo;t write specs for private methods - test them implicitly through the
public methods</li>
<li>Spec style for parsing output:

<ol>
<li>create a csv string</li>
<li>create an output hash</li>
<li>expect parsing the csv string to equal the output hash</li>
</ol>
</li>
<li>TDD approach - do only the smalles thing to get the message to change: e.g.
create initializer with no args, then add one arg, then start to define
behaviour</li>
<li>Now actually use the parser.</li>
<li>Tests green = OVERWHELMING INSTINCT TO COMMIT!</li>
<li>&ldquo;Component test&rdquo; = integration test just covering a selection of components
(?)</li>
<li>Test refactoring: extract methods! (e.g. to do repeated stubbing and other
setup)

<ul>
<li>could use <code>before</code>, but tends to do this later or not at all. Makes specs
harder to read and maintain (?): each spec is different. Extracting method is definitely the first
step.</li>
</ul>
</li>
<li>&ldquo;We make a mess first, then we clean it up&rdquo;</li>
<li>Invert control: it&rsquo;s odd that we pass the csv into the Invitations class

<ul>
<li>Instead, &ldquo;build dependencies at higher level and pass it down to lower
levels&rdquo; (??)</li>
<li>Instead of passing the csv to invitations and creating a parser based on
it, let&rsquo;s send invitations to the parser (!)</li>
</ul>
</li>
<li>Inverting control benefits:

<ul>
<li>Easier to follow Open/Closed principle</li>
<li>Shorter specs</li>
</ul>
</li>
<li>Question &ldquo;The specs passed from the beginning, so weren&rsquo;t you done?&rdquo;

<ul>
<li>Answer: Refactoring makes more flexible maintainable code</li>
</ul>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/13/bath-ruby-linda-liukas-principles-of-play/">Bath Ruby: Linda Liukas - Principles of Play</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-13T09:42:26+00:00" pubdate data-updated="true">Mar 13th, 2015</time>
        
           | <a href="/blog/2015/03/13/bath-ruby-linda-liukas-principles-of-play/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/13/bath-ruby-linda-liukas-principles-of-play/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://2015.bathruby.org/">Bath Ruby 2015</a>, live blogging some of the
talks</em></p>

<p><img src="https://pbs.twimg.com/media/B_-CEvAWEAA1Fqu.jpg:large" alt="Photo of Linda Liukas by
@Naomi_Freeman" /></p>

<p><em>photo by <a href="https://twitter.com/naomi_freeman/">@Naomi_Freeman</a></em></p>

<ul>
<li>Railsgirls in over 277(?) cities

<ul>
<li>Started in Helsinki</li>
</ul>
</li>
<li>&ldquo;The most scalable change in the world happens when you&rsquo;re 4 years old&rdquo;</li>
<li>&ldquo;If you draw 1000 circles eventually your circles will get better&rdquo;</li>
<li>Realtity distortion: being in the community allowed her to think &ldquo;Hey I can
write a children&rsquo;s book, even though I don&rsquo;t know how to draw, or write a
book, or program very well</li>
<li>3 principles of learning: Playfulness, Curiosity, Rules</li>
<li>Learning Real-world languages (Finnish) by reading other people&rsquo;s texts, not
by learning grammar rules first</li>
<li>&ldquo;Little girls don&rsquo;t know the are not supposed to like computers&rdquo;</li>
<li>Two joys of programming: 1. Building beautiful elegant proper things 2.
trying things which you&rsquo;re not sure will work and thrilling when it actually
works. This second one is the playfulness (what she&rsquo;s focussing on&#8221;</li>
<li>3 components of learning: Achievement, Social and Immersion. Traditional
learning mainly just focusses on the first</li>
<li>Rules: <em>how</em> do things work. &ldquo;Imposing logic on something otherwise hard to
understand&rdquo;</li>
<li>Teaching through metaphors: baking cupcakes - if you change the recipe
you&rsquo;ll get different cupcakes.</li>
<li>Curiosity: Asking <em>why</em>

<ul>
<li>Introduce 5 year olds to the idea that any object (cars, dogs, toilets)
could have a computer in it</li>
<li>Opening up to asking questions: &ldquo;what <em>happens</em> when I press play&rdquo;, &ldquo;is
the internet a place&rdquo; - these sort of questions which many adults don&rsquo;t
really
ask</li>
<li>Making computers out of paper - totally open thinking: this button prints
out lego - that button makes breakfast.</li>
</ul>
</li>
<li>__why&rsquo;s poignant guide etc. - opens up to this idea that people in
programming can be whimsical, human - not what an initial picture of
programming might be like</li>
<li>Programmers have found the loophole: we are the world-builders: making
something out of nothing using just words: Programming as Storytelling</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/28/setting-up-a-ruby-on-rails-dev-environment-on-bowery-dot-io/">Setting Up a Ruby Dev Environment on Bowery.io</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-02-28T01:27:44+00:00" pubdate data-updated="true">Feb 28th, 2015</time>
        
           | <a href="/blog/2015/02/28/setting-up-a-ruby-on-rails-dev-environment-on-bowery-dot-io/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/02/28/setting-up-a-ruby-on-rails-dev-environment-on-bowery-dot-io/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>EDIT: Apparently it&rsquo;s not possible to run docker inside a Bowery instance
because Bowery uses docker and docker has a hard time running inside a docker
container - see <a href="https://groups.google.com/forum/#!topic/bowery/WsXWzWghwVc">this post on the forum</a></em></p>

<p><a href="http://bowery.io/">Bowery.io</a> is a hosted development environment service.
The idea is that you edit your files locally, but run your code in a cloud-hosted
<a href="https://www.docker.com/">Docker</a> container, based on an image which can be
shared and edited by teams.</p>

<p>It looks like it used to host its own packages and allow environments to be
set up through a gui, but now the approach is to either install everything by
hand or use a dockerfile, which I guess makes sense as docker has become more
and more popular and Bowery&rsquo;s main audience is going to be quite devvy devs
who are comfortable using docker.</p>

<p>I had a go at setting up an environment for ruby development and didn&rsquo;t really
find any documentation so here&rsquo;s what I tried:</p>

<h2>Approach: Use a dockerfile</h2>

<p>The simplest way to start your Bowery image with ruby is to use a dockerfile
which sets ruby up for you. This can be as simple as creating a file called
<code>Dockerfile</code> at the root of your project, consisting of this line:</p>

<pre><code>from ruby:2.2.0
</code></pre>

<p>&hellip;then when you select your code directory for the first time through the
Bowery app you can click &ldquo;Yes&rdquo; on this prompt to initialize your Bowery image
based on that Dockerfile:</p>

<p><img src="/images/content/bowery_prompt.png"></p>

<p>More details about this approach can be found <a href="http://bowery.io/posts/dockerfile-support/">on the Bowery blog</a></p>

<h2>Approach: Install ruby directly</h2>

<p>Not having ever used docker in anger, my first attempt involved just
installing ruby manually. The following steps are
basically a textbook set of steps for installing ruby on a new Ubuntu machine
(which is what Bowery instances are based on):</p>

<ol>
<li><p>Update apt-get:</p>

<pre><code> apt-get update
</code></pre></li>
<li><p><a href="https://github.com/sstephenson/ruby-build/wiki#suggested-build-environment">Install the dependencies for ruby-build</a>
using apt-get</p></li>
<li><p><a href="https://github.com/sstephenson/rbenv">Install rbenv</a></p></li>
<li><p><a href="https://github.com/sstephenson/ruby-build">Install ruby-build</a></p></li>
<li><p>Install ruby with rbenv:</p>

<pre><code> rbenv install 2.2.0
 rbenv global 2.2.0
</code></pre></li>
<li><p>Install bundler:</p>

<pre><code> gem install bundler
</code></pre></li>
</ol>


<h2>What about Rails?</h2>

<p>I <em>have</em> managed to successfully set up a Rails dev environment using Bowery,
but it ended up being pretty fiddly and I&rsquo;m not sure I have anything coherent
enough to blog about.</p>

<p>I essentially set it up just like any other ubuntu box would be set up (but
I&rsquo;m still pretty green at server management - hence fiddly).</p>

<p>What I was hoping
to find was a Dockerfile which at least set up Ruby and Postgres, but it seems
like the normal approach is to run separate Docker containers and link them
(as in <a href="http://allenwei.cn/setup-rails-development-environment-with-docker/">this tutorial</a>).
I don&rsquo;t think this approach applies to Bowery, where a single dockerfile is
used to initialize the image. I suppose I could run docker on Bowery though? (#meta)</p>

<p>In any case, here are the additional components which need to be installed to
run my Rails dev environment:</p>

<ul>
<li>A Javascript runtime (I installed Node.js with apt-get)</li>
<li>A database (I installed Postgresql with apt-get but had a pain setting it up)</li>
<li>A headless browser for javascript specs (I <a href="http://phantomjs.org/build.html">built phantom.js from
scratch</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/23/how-your-base-path-gets-generated-in-osx/">How Your Base PATH Gets Generated in OSX</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-02-23T23:03:33+00:00" pubdate data-updated="true">Feb 23rd, 2015</time>
        
           | <a href="/blog/2015/02/23/how-your-base-path-gets-generated-in-osx/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/02/23/how-your-base-path-gets-generated-in-osx/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>On OSX and linux it seems to be fairly common practice to totally define the <code>PATH</code> in a
<code>.profile</code> or <code>.bashrc</code> file. This gives total control over the order in which
various locations are searched through. Here&rsquo;s the line from <a href="https://github.com/dgmstuart/dotfiles/blob/master/.profile">my .profile</a>:</p>

<pre><code>export PATH=~/bin:/usr/local/bin:/usr/bin:/usr/sbin:/bin:/sbin
</code></pre>

<p>However, your <code>PATH</code> isn&rsquo;t just set through <code>profile</code> and <code>rc</code> files: if you
don&rsquo;t build your path from scratch and you only ever append or prepend to it
with statements like <code>export PATH=$PATH:some/other/stuff</code> then the OS helpfully
sets your base <code>PATH</code> to something sensible.</p>

<p>It does this based on various files in <code>/etc</code> (at least on OSX):</p>

<h2><code>/etc/paths</code></h2>

<p>This contains the list of the various binary directories which make up the core of your path:</p>

<pre><code>/usr/local/bin
/usr/bin
/bin
/usr/sbin
/sbin
</code></pre>

<h2><code>/etc/paths.d</code></h2>

<p>This contains a number of files which contain paths for various applications,
again with one path element per line. I believe these are added to the <em>end</em> of
the <code>PATH</code>. Mine includes a <code>git</code> file:</p>

<pre><code>/usr/local/git/bin
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/06/how-to-not-break-permalinks-in-wordpress/">How to Not Break Permalinks in WordPress</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-02-06T00:13:40+00:00" pubdate data-updated="true">Feb 6th, 2015</time>
        
           | <a href="/blog/2015/02/06/how-to-not-break-permalinks-in-wordpress/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/02/06/how-to-not-break-permalinks-in-wordpress/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve written a blog post for <a href="https://www.dxw.com/">work</a> about how much you can and can&rsquo;t mess around with urls in WordPress before old links stop working. It boils down to 5 rules:</p>

<ol>
<li>Editing Post slugs doesn’t break old links</li>
<li>Editing Post url structure (the permalinks) doesn’t break old links</li>
<li>Changing both the permalink structure and the slug will break old links</li>
<li>Editing the parent/child relationships of pages doesn’t break old links</li>
<li>Editing the slugs of pages will break old links</li>
</ol>


<p>For more details read the full post on the dxw blog: <a href="https://www.dxw.com/2015/02/keeping-traffic-flowing-to-your-wordpress-site-after-a-big-restructuring/">Keeping traffic flowing to your WordPress site after a big restructuring</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/04/managing-identity-in-git/">Managing Identity in Git</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-02-04T00:17:21+00:00" pubdate data-updated="true">Feb 4th, 2015</time>
        
           | <a href="/blog/2015/02/04/managing-identity-in-git/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/02/04/managing-identity-in-git/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When using git, your commits are labelled with your name and email address.
These are usually based on the <code>user.name</code> and <code>user.email</code> fields in a global <code>.gitconfig</code> file in your home directory,
ensuring that these values are always available.</p>

<p>There might be some circumstances under which these need to vary. For example, on public projects for work I like to use my work email rather than my personal one.
There are a couple of ways to achieve this:</p>

<h3>1. As an argument to the commit:</h3>

<pre><code>git commit user.email duncan@work.com
</code></pre>

<p>This is useful for one-off commits but would be tedious to type every time.</p>

<h3>2. In a local git config</h3>

<pre><code>git config user.email duncan@work.com
</code></pre>

<p>This creates a local <code>.gitconfig</code> file. Useful in project directories - since all child directories will use settings in this file,
or will fall back to the global settings if a setting isn&rsquo;t present in this file.</p>

<h3>3. In an environment variable</h3>

<pre><code>export AUTHOR_EMAIL=duncan@work.com
export COMMITTER_EMAIL=duncan@work.com
</code></pre>

<p>These override everything - any email setting in any <code>.gitconfig</code> file.
Useful if like me you like to <a href="https://github.com/dgmstuart/dotfiles">manage your dotfiles in git</a>
and share them on github in order to easily copy settings between different computers.</p>

<p>These could be set in a local <code>.profile</code> file to make every project on that computer use a different email to your main one, while keeping the <code>.gitconfig</code> file pristine.
<em>To understand the difference between Author and Committer see <a href="https://stackoverflow.com/questions/18750808/difference-between-author-and-committer-in-git/18754896#18754896">this StackOverflow post</a></em></p>

<h2>Bonus: What if you don&rsquo;t set anything?</h2>

<p>It turns out git will try it&rsquo;s best to find a name and email address to associate with your commits even if you don&rsquo;t tell it explicitly what these are.
Here&rsquo;s where it looks, in order, for an email address to use:</p>

<ol>
<li>An <code>EMAIL</code> local variable</li>
<li>Your system username <code>@</code> the value in <code>/etc/mailname</code> (which only exists on Debian systems?)</li>
<li>Your system username <code>@</code> the fully qualified hostname of the computer</li>
</ol>


<p>For more information check out the <a href="http://git-scm.com/docs/git-commit-tree.html">git documentation on the topic</a></p>

<p><em>Thanks to <a href="https://twitter.com/holizz">@holizz</a> for helping me understand all this</em></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/22/pivotal-talk-data-driven-product-decisions/">Pivotal Talk: Data-informed Product Decisions</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2014-10-22T12:48:38+01:00" pubdate data-updated="true">Oct 22nd, 2014</time>
        
           | <a href="/blog/2014/10/22/pivotal-talk-data-driven-product-decisions/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2014/10/22/pivotal-talk-data-driven-product-decisions/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.meetup.com/Pivotal-Labs-Tech-Talks/events/213571202/">http://www.meetup.com/Pivotal-Labs-Tech-Talks/events/213571202/</a></p>

<p>Marc Abraham. <a href="http://www.slideshare.net/abrahammarc1/102214-pivotal-labs-tech-talk">Slides</a></p>

<ul>
<li>First thing is to ask the right questions</li>
<li>Book - Lean Analytics</li>
<li>Articulate Assumptions about the benefits of your product,</li>
<li>Define Hypothesis: how will we know (in terms of hard metrics) if our assumptions are validated? What does success look like?</li>
<li>To start with, focus on one key metric</li>
<li>Behavioural plan - what do you want users to do - both to achieve user needs and business needs</li>
<li><p>You have a live product:</p>

<ul>
<li>Is it meeting the hypothesis</li>
</ul>
</li>
<li><p>Product retrospectives: how are we doing with the product - what does the data tell us about how well it&rsquo;s going?</p></li>
<li><p>Data-Driven vs Data Informed approaches</p>

<ul>
<li>Data Driven:

<ul>
<li>Focus on one metric - collect lots of data (A/B, Multivariate tests etc. and understand whether what you&rsquo;re doing is impacting that metric)</li>
</ul>
</li>
</ul>
</li>
<li><p>Data Informed</p>

<ul>
<li>Data might not tell you whether it&rsquo;s a good product idea full stop: might be a leap of faith

<ul>
<li>When you actually have an MVP, <em>then</em> you can start gathering data</li>
</ul>
</li>
<li>Plurality is the key: data is often just one aspect in data decisions</li>
<li>Talk - Adam Osiri (?) on Facebook&rsquo;s data-informed approach</li>
<li>Data is important, bit other factors come into play: resources, competition, regulation, brand.</li>
<li>You can&rsquo;t replace intuition or creative ideas with data</li>
</ul>
</li>
<li><p>5 key points:</p>

<ol>
<li>Focus on the right questions</li>
<li>Data can&rsquo;t replace intuition</li>
<li>Listen to the data and act accordingly

<ul>
<li>This is hard</li>
<li>e.g. data might say that your idea or your variation isn&rsquo;t actually effective.</li>
</ul>
</li>
<li>Build and launch with data in mind

<ul>
<li>Include analytics in the user stories</li>
<li>Start thinking about your assumptions and hypotheses at the beginning of the product life cycle</li>
<li>as soon as you start working on the product you should be working with the analytics team/building data in from the ground up.</li>
</ul>
</li>
<li>Be clear about your hypotheses, sample size and timing.

<ul>
<li>how large a sample do you need before you can claim that your results are significant.</li>
</ul>
</li>
</ol>
</li>
<li><p>Final statement &ldquo;Embrace the data - don&rsquo;t fear it&rdquo;</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/09/28/wordcamp-europe-2014-notes-2-dot-5-matt-mullenweg-q-and-a/">WordCamp Europe 2014 Notes - 2.5: Matt Mullenweg Q&amp;A</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2014-09-28T12:28:13+01:00" pubdate data-updated="true">Sep 28th, 2014</time>
        
           | <a href="/blog/2014/09/28/wordcamp-europe-2014-notes-2-dot-5-matt-mullenweg-q-and-a/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2014/09/28/wordcamp-europe-2014-notes-2-dot-5-matt-mullenweg-q-and-a/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://2014.europe.wordcamp.org/">WordCamp Europe</a> in Sofia - taking rough notes on some of the talks</em></p>

<p>Matt Mullenweg, Om Malik <a href="http://2014.europe.wordcamp.org/session/matt-mullenweg/">http://2014.europe.wordcamp.org/session/matt-mullenweg/</a></p>

<p><img src="https://pbs.twimg.com/media/Byng_nfIgAErGt4.jpg" alt="Matt Mullenweg in conversation with Om Malik" /></p>

<h2>In conversation with Om Malik:</h2>

<ul>
<li>Biggest learning in the last 11 years?

<ul>
<li>The community makes it what it is - not the feature set. Lots of other software checks the same boxes that WordPress checks, but it doesn&rsquo;t have what we have in this room</li>
</ul>
</li>
<li>For-profits have a limit in their vision. Non-profits have difficulty making connections with enough/the right people. Working together they can achieve more.</li>
<li>&ldquo;I&rsquo;d rather put things into the world under moral licences than immoral ones&rdquo; - GPL is the &ldquo;Most moral licence&rdquo; that you can put software out under</li>
<li>&ldquo;I&rsquo;d be skeptical of an open source company that kept everyone in the same office&rdquo; - that&rsquo;s missing part of the benefit: Open source works when people are all around the world.</li>
<li>How do we structure WP so that it can adapt to what the trends are over the coming years?

<ul>
<li>more and more access is on closed proprietary devices (iphones etc.)</li>
<li>Wp wasn&rsquo;t designed with touch interaction in mind. WP apps haven&rsquo;t had a ton of community involvement</li>
</ul>
</li>
</ul>


<p><img src="https://pbs.twimg.com/media/BynhzoPIMAAwoDT.jpg" alt="Photo of Matt Mullenweg Q&amp;A by @Joan_Artes on twitter" /></p>

<p><em>Photo by <a href="https://twitter.com/Joan_Artes/status/516191909656920065/photo/1">@Joan_Artes</a></em></p>

<h2>Q&amp;A</h2>

<ul>
<li>What are your thoughts about entrepreneurship in Europe, particularly eastern europe?

<ul>
<li>@om - Local laws in Europe favour local investors over international investors: a challenge for entrepreneurship</li>
<li>&ldquo;The best thing European companies can do is to stop comparing themselves to American companies&rdquo;</li>
</ul>
</li>
<li>CFTP Wheatley: &ldquo;You&rsquo;ve scaled up 1800 people - what do those people actually do&rdquo;

<ul>
<li>Lots on support</li>
<li>Design and development: allows us to contribute much much more to WP Core</li>
<li>&ldquo;I want to scale that as far as it can go&rdquo;</li>
<li>Wants it to be an exemplar of a mixed nonprofit/for profit: prove to the world that it <em>Can</em> be done.</li>
</ul>
</li>
<li>Once we have APIs it will enable a whole new class of application - e.g. front-ends which talk to something which isn&rsquo;t WP but implements the WP API.

<ul>
<li>A Cambrian explosion for WordPress - comparable to when plugins were introduced</li>
</ul>
</li>
<li>&ldquo;We&rsquo;ve found the search in WP isn&rsquo;t very good&rdquo;

<ul>
<li>&ldquo;No it&rsquo;s terrible&rdquo;</li>
<li>If you&rsquo;re serious about search you should use a plugin that indexes your content in lucene or elasticsearch</li>
</ul>
</li>
<li>No plans now or in the future to have paid plugins - or a paid app store.

<ul>
<li>Could make things more discoverable: look at what you&rsquo;ve got installed and suggest things you might find useful</li>
</ul>
</li>
<li>This year there were more non-english downloads than english downloads

<ul>
<li>More translations will be the biggest driver of increases in WP usage</li>
</ul>
</li>
<li>How much should WP businesses be contributing to the WP community?

<ul>
<li>Maybe 5%, so if you have 100 employees, 5 of them could be contributing to core.</li>
</ul>
</li>
<li>Can we get rid of Backwards compatibility

<ul>
<li>I don&rsquo;t buy that we should break backwards compatibility for architectural purity. More inclined to do it for reasons that will mean more people use WP</li>
</ul>
</li>
<li>Lots of plugins aren&rsquo;t maintained - some maintainers may even have died. Can we get these just removed from the directory?

<ul>
<li>Plugins over 2 years old will stop showing up in search results</li>
<li>Plugin search is going to be optimised towards putting the most popular, best supported ones at the top.</li>
<li>Factor in the compatibility between plugins - plugins which work well together</li>
<li>Plugins are the most open area for innovation - it&rsquo;s an open market</li>
</ul>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/09/28/wordcamp-europe-2014-notes-2-dot-4-code-deodorant/">WordCamp Europe 2014 Notes - 2.4: Code Deodorant</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2014-09-28T10:27:07+01:00" pubdate data-updated="true">Sep 28th, 2014</time>
        
           | <a href="/blog/2014/09/28/wordcamp-europe-2014-notes-2-dot-4-code-deodorant/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2014/09/28/wordcamp-europe-2014-notes-2-dot-4-code-deodorant/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://2014.europe.wordcamp.org/">WordCamp Europe</a> in Sofia - taking rough notes on some of the talks</em></p>

<p>Tom Nowell (cftp) <a href="http://2014.europe.wordcamp.org/session/tom-nowell/">http://2014.europe.wordcamp.org/session/tom-nowell/</a></p>

<ul>
<li>Now when running vanilla WP without plugins you shouldn&rsquo;t see any warnings, so all warnings are things you should pay attention to</li>
<li>&lsquo;@&rsquo; swallows errors - hides them.</li>
<li><a href="http://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts">pre_get_posts action</a> - useful for removing complexity: modifying queries before they get run</li>
<li>Law of Demeter &ldquo;if you&rsquo;re talking to something, only talk to the things directly adjacent to you&rdquo;</li>
<li>No global variables - random ordering of tests can help to show up issues.</li>
<li>Tools for code quality:

<ul>
<li>php syntax checking - if your editor isn&rsquo;t doing this you&rsquo;re doing it wrong. PHP Storm does this</li>
<li><a href="https://github.com/squizlabs/PHP_CodeSniffer">php code sniffer</a> - give it coding standards - it&rsquo;ll check them</li>
<li><a href="https://github.com/Halleck45/PhpMetrics">php Metrics</a></li>
<li>phpLOC - tells you how many lines, classes, namespaces, measure of code complexity</li>
<li><a href="https://github.com/phpmd/phpmd">php Mess detector</a> - fuzzy matching: helps detect typos and join up e.g. misspelled variables which might be the same thing</li>
<li>NPath &amp; Cyclomatic complexity - Cycl = number of points at which code may diverge, NPath is number of execution paths through the code.

<ul>
<li>NPath complexity is roughly equivalent to the number of unit tests that you need to have to fully test the function</li>
</ul>
</li>
</ul>
</li>
<li>Lots of WP functions have incredibly large npath complexity - WP_Query::get_posts is insanely large. Even larger in WP 4.0

<ul>
<li><a href="http://www.tomjn.com/390/wp_queryget_posts/">http://www.tomjn.com/390/wp_queryget_posts/</a></li>
</ul>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/09/28/wordcamp-europe-2014-notes-2-dot-3-the-next-generation-hosting-stack/">WordCamp Europe 2014 Notes - 2.3: The Next Generation Hosting Stack</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2014-09-28T09:33:02+01:00" pubdate data-updated="true">Sep 28th, 2014</time>
        
           | <a href="/blog/2014/09/28/wordcamp-europe-2014-notes-2-dot-3-the-next-generation-hosting-stack/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2014/09/28/wordcamp-europe-2014-notes-2-dot-3-the-next-generation-hosting-stack/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://2014.europe.wordcamp.org/">WordCamp Europe</a> in Sofia - taking rough notes on some of the talks</em></p>

<p>Mark Jaquith (@markjaquith) <a href="http://2014.europe.wordcamp.org/session/mark-jaquith/">http://2014.europe.wordcamp.org/session/mark-jaquith/</a></p>

<ul>
<li>Why is performance important?

<ul>
<li>It&rsquo;s not about overall speed - it&rsquo;s about the frustration of being interrupted</li>
<li>Everyone hates Lag</li>
</ul>
</li>
<li>WP has a bad rep for speed

<ul>
<li>no matter what wp core do, WP DB&rsquo;s are getting bigger, lots of functionality, lots of plugins</li>
</ul>
</li>
<li>WP is dynamic - everything is built on the fly

<ul>
<li>Why don&rsquo;t we just generate static files? - No persistent caching in core. Pages are so dynamic: search results etc. Only a small number of pages can be cached</li>
</ul>
</li>
<li>For the purposes of this talk: speed = speed of download of just the html page (not css or other assets)</li>
<li>3+ seconds = EMERGENCY</li>
<li>1-3 seconds = Slow</li>
<li>100-250ms = fast</li>
<li>&lt;100ms = instant</li>
<li>Many hosts don&rsquo;t help with static caching</li>
<li>Virtual server hosting - what to look for

<ul>
<li>Are they going to be around for a while?</li>
<li>What&rsquo;s their raw performance - lots of people have done hardcore speed tests - easily googleable</li>
<li>Value for money</li>
<li>Tool support - provisioning scripts, auto backup</li>
<li>Recommended: Linode, Digital Ocean</li>
</ul>
</li>
</ul>


<h2>Web Server</h2>

<ul>
<li>&ldquo;Nginx is the best thing to happen to web servers ever&rdquo;</li>
<li>Apache approach - php is baked in. That means there&rsquo;s an overhead for each request</li>
<li>Nginx approach - can&rsquo;t have php baked in. PHP-FPM runs php</li>
<li>PHP 5.5 has significant performance improvements over previous versions</li>
<li>HHVM - facebook project: transcodes php into machine code on the fly, with caching = crazy fast

<ul>
<li>Might not be production stable - need monitoring to catch when it crashes</li>
</ul>
</li>
</ul>


<h2>Database</h2>

<ul>
<li>MySQL is not the only option: MariaDB, Percona</li>
<li>HyperDB - project for providing a layer to manage lots of database instances</li>
</ul>


<h2>Caching</h2>

<h3>Page caching:</h3>

<ul>
<li>Questions - who, what, how long. Answers: Anonymous???, front of site, minutes, maybe hours???.</li>
<li>Nginx has a cache</li>
<li>Varnish is another option, but is another moving part</li>
<li>Plugins are tightly integrated with WP, but run in php so are much slower</li>
</ul>


<h3>Object caching:</h3>

<ul>
<li>Recommend using Redis (Pantheon uses it)</li>
<li>Memcached - used to be a recommendation. Restarting flushes the data - can cause massive spikes in load</li>
<li>Mark&rsquo;s wrappers:

<ul>
<li>TLC Tranients <a href="http://bitly/tlc-transients">http://bitly/tlc-transients</a></li>
<li>Fragment caching: <a href="http://bitly/fragment-cache">http://bitly/fragment-cache</a></li>
</ul>
</li>
</ul>


<h3>The next generation stack</h3>

<p><img src="https://pbs.twimg.com/media/Bym-26pCcAAyPVd.jpg:large" alt="The next generation WordPress hosting stack" /></p>

<ul>
<li><p>Audience qu Hyper db - works with MariaDB &amp; Percona?</p>

<ul>
<li>AFAIK yes</li>
</ul>
</li>
<li><p>My qu - can you make core use Redis for your object cache or is that just for your own caching</p>

<ul>
<li>Yes - you configure an object cache and core will use it to cache posts, taxonomies, a bunch of other things.</li>
</ul>
</li>
<li><p>Audience qu: What do you use for performance monitoring</p>

<ul>
<li>NewRelic: very expensive, but gives you amazing insights</li>
</ul>
</li>
</ul>


<p>*</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="3">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="1">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
   
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:dgmstuart.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/03/27/execute-ruby-code-inline-in-the-editor/">Execute Ruby Code Inline in the Editor</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/25/unboxed-event-notes/">Unboxed Event Notes: &#8220;Unstick Your Digital Products&#8221;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/22/tim-nash-at-wordcamp-london-beyond-unit-tests/">Tim Nash at WordCamp London - Beyond Unit Tests</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/22/mark-jaquith-at-wordcamp-london-cache-money-business/">Mark Jaquith at WordCamp London - Cache Money Business</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/21/wp-london-bruce-lawson-responsive-images/">WordCamp London - Bruce Lawson - Responsive Images</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/dgmstuart">@dgmstuart</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dgmstuart',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Duncan Stuart -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dgmscode';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script>
  $(document).ready(function() {  
  var stickyNavTop = $('nav').offset().top;  
    
  var stickyNav = function(){  
  var scrollTop = $(window).scrollTop();  
         
  if (scrollTop > stickyNavTop) {   
      $('nav').addClass('sticky');  
  } else {  
      $('nav').removeClass('sticky');   
  }  
  };  
    
  stickyNav();  
    
  $(window).scroll(function() {  
      stickyNav();  
  });  
  });  
</script>


</body>
</html>


<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>dgms code</title>
  <meta name="author" content="Duncan Stuart">

  
  <meta name="description" content="I&rsquo;ve been to a number of conferences and talks recently and I&rsquo;ve developed a habit
of live-blogging my notes: getting them up online as &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dgmstuart.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="dgms code" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44436648-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">dgms code</a></h1>
  
    <h2>A dev blog: mostly Ruby on Rails with a little WordPress</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/27/some-tools-for-faster-blogging-in-octopress/">Some Tools for Faster Blogging in Octopress</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-27T18:48:31+00:00" pubdate data-updated="true">Mar 27th, 2015</time>
        
           | <a href="/blog/2015/03/27/some-tools-for-faster-blogging-in-octopress/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/27/some-tools-for-faster-blogging-in-octopress/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve been to a number of conferences and talks recently and I&rsquo;ve developed a habit
of live-blogging my notes: getting them up online as quickly as possible.</p>

<p>More on that in a future post but I want to talk about how I am able to start taking
notes fast, and publish them even faster (when a talk finishes, lots of people will be
trying to get out of the row of seats past me!).</p>

<p><em>NOTE: The scripts below assume editing with terminal vim. It might be more flexible to switch this out for
the <code>$VISUAL</code> environment variable (?), but if you use a different editor you&rsquo;ll probably
just want to replace <code>vim</code> with whatever command you use to boot up your editor - e.g. <code>subl</code>, <code>mvim</code> etc.</em></p>

<h3>Creating posts</h3>

<p>The octopress command for creating a post is <code>rake new_post["The name of my
post"]</code>. I&rsquo;d then typically select the filename it outputs with the mouse,
paste that into the command line and open it with vim. That&rsquo;s <em>way</em> too much
typing, and any seasoned vim user would wince at the word &ldquo;mouse&rdquo;.</p>

<p>Here&rsquo;s a function which lets me type <code>newpost "The name of my post"</code> and creates
the post, isolates it and opens it in one step:</p>

<figure class='code'><figcaption><span>~/.profile </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="k">function</span> newpost<span class="o">(){</span>
</span><span class='line'>  <span class="nb">cd</span> <span class="k">${</span><span class="nv">BLOG_HOME</span><span class="p">:?</span><span class="s2">&quot;Need to set BLOG_HOME to the location of the octopress blog directory&quot;</span><span class="k">}</span>
</span><span class='line'>  <span class="nv">output</span><span class="o">=</span><span class="k">$(</span> rake new_post<span class="o">[</span><span class="s2">&quot;$@&quot;</span><span class="o">]</span> <span class="k">)</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;$output&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">local </span><span class="nv">return_code</span><span class="o">=</span><span class="nv">$?</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">[</span> <span class="nv">$return_code</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="c"># Get the name of the file which was just created:</span>
</span><span class='line'>    <span class="nv">post_path</span><span class="o">=</span><span class="k">$(</span>grep -o <span class="s1">&#39;source\/_posts\/.*\.markdown&#39;</span> <span class="o">&lt;&lt;&lt;</span> <span class="nv">$output</span><span class="k">)</span>
</span><span class='line'>    <span class="c"># Stash all other posts (for faster generation)</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Isolating post...&quot;</span>
</span><span class='line'>    rake isolate<span class="o">[</span><span class="s2">&quot;$post_path&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="c"># Open with the cursor at the bottom of the header:</span>
</span><span class='line'>    vim -c <span class="s1">&#39;normal G&#39;</span> <span class="nv">$post_path</span>
</span><span class='line'>  <span class="k">fi</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>My <a href="https://github.com/dgmstuart/dotfiles">dotfiles</a> are shared between
multiple machines, so the <code>BLOG_HOME</code> environment variable is set in a local
profile:</p>

<figure class='code'><figcaption><span>~/.profile.local </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">export </span><span class="nv">BLOG_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/Dev/Personal/blog
</span></code></pre></td></tr></table></div></figure>


<p>I&rsquo;m pretty new at shell scripting, so if you know of a way to make this better
or more robust, please let me know in the comments.</p>

<h3>Isolating Posts</h3>

<p>Notice in the <code>newpost</code> function I&rsquo;ve got <code>rake isolate["$post_path"]</code> - that&rsquo;s a
nifty task provided by Octopress which gets around the fact that when you generate
your Octopress blog it has to rebuild the entire site (?) which can be very slow.
Unfortunately it doesn&rsquo;t seem to be documented, but you can see the source in the
<code>Rakefile</code> of your Octopress install.</p>

<p><em>Side note: run <code>rake -T</code> in your blog directory to see all of the Octopress commands #protip</em></p>

<p><code>rake isolate</code> moves all posts into <code>source/_stash</code>, unless they  match the given
string in their title. This means that when you&rsquo;re previewing your post with <code>rake preview</code>
it&rsquo;s much faster to re-generate because it&rsquo;s only having to handle one post each time.</p>

<p>If you&rsquo;re running this manually, there&rsquo;s no need to pass the whole path: you can just
find one of two words which are unique in the filename of your post and use that - e.g.
<code>rake isolate[wizards]</code></p>

<p>You can put your stashed posts back with <code>rake integrate</code>.</p>

<h3>Listing and revisiting posts</h3>

<p>A couple of things I find myself needing to do fairly often:</p>

<ul>
<li>Make an edit to the post I was most recently editing</li>
<li>Find a post where I can&rsquo;t remember the title was</li>
</ul>


<figure class='code'><figcaption><span>~/.profile </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># blogposts: display the list of posts ordered by last modified time</span>
</span><span class='line'><span class="c"># %m                           -- Last modified timestamp</span>
</span><span class='line'><span class="c"># %N                           -- Quoted File name</span>
</span><span class='line'><span class="c"># -exec stat -f &quot;%m %N&quot; {} \;  -- Outputs a timestamp at the beginning of the line for sorting</span>
</span><span class='line'><span class="c"># cut -d &#39; &#39; -f2-              -- Returns only the second field in a space-delimited string</span>
</span><span class='line'><span class="nb">alias </span><span class="nv">blogposts</span><span class="o">=</span><span class="s1">&#39;find $BLOG_HOME/source/_posts/* -exec stat -f &quot;%m %N&quot; {} \; | sort -n | cut -d &quot; &quot; -f2-&#39;</span>
</span><span class='line'><span class="nb">alias </span><span class="nv">lastpost</span><span class="o">=</span><span class="s1">&#39;find `blogposts` | tail -1 &#39;</span>
</span><span class='line'><span class="nb">alias </span><span class="nv">epost</span><span class="o">=</span><span class="s1">&#39;vim `lastpost`&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Deploying</h3>

<p>The <code>gen:deploy</code> rake task is a built-in alias for running the
<code>:integrate</code>, <code>:generate</code>, and <code>:deploy</code> tasks, but again, typing
<code>rake gen:deploy</code> is just too much typing, hence:</p>

<figure class='code'><figcaption><span>~/.profile </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">alias </span><span class="nv">rgd</span><span class="o">=</span><span class="s1">&#39;rake gen_deploy&#39;</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/27/execute-ruby-code-inline-in-the-editor/">Execute Ruby Code Inline in the Editor</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-27T15:41:47+00:00" pubdate data-updated="true">Mar 27th, 2015</time>
        
           | <a href="/blog/2015/03/27/execute-ruby-code-inline-in-the-editor/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/27/execute-ruby-code-inline-in-the-editor/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve often wondered how in Ruby screencasts they magically execute code inline
in the editor, e.g. they type:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">reverse</span> <span class="c1"># =&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&hellip;and it magically becomes</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">reverse</span> <span class="c1"># =&gt; [3, 2, 1]</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can see how effective this is in action in
<a href="http://www.rubytapas.com/episodes/11-Method-and-Message">one of the sample episodes for Ruby Tapas</a>
by the wise and excellent <a href="http://about.avdi.org/">Avdi Grimm</a>.</p>

<p>Today I learned how. Apparently it&rsquo;s a Textmate feature called “Execute and
Update &lsquo;# =>&rsquo; Markers” which has been ported over to other editors:</p>

<ul>
<li><a href="https://github.com/mmims/sublime-text-2-ruby-markers">Plugin for Sublime Text2</a></li>
<li><a href="https://github.com/t9md/vim-ruby-xmpfilter">Plugin for Vim</a></li>
</ul>


<p><em>A quick google hasn&rsquo;t revealed how to enable this in Emacs, but it must be
possible because I believe that&rsquo;s what Avdi uses</em></p>

<p>This also explains why the snippet for <code>#</code> expands to <code># =&gt;</code>. I&rsquo;d always
assumed that this was intended to make multiline comments more readable. That
sounds a bit silly now that I know :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/25/unboxed-event-notes/">Unboxed Event Notes: &#8220;Unstick Your Digital Products&#8221;</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-25T09:55:22+00:00" pubdate data-updated="true">Mar 25th, 2015</time>
        
           | <a href="/blog/2015/03/25/unboxed-event-notes/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/25/unboxed-event-notes/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at a <a href="https://www.eventbrite.co.uk/e/unstick-your-digital-products-rapidly-progress-a-complex-product-or-portfolio-of-stalled-products-tickets-15872783924">speaker session from Unboxed consulting</a></em></p>

<h2><a href="https://www.linkedin.com/pub/dave-evans/a/311/919">Dave Evans</a> - Product Manager (E-commerce) at Macmillan Publishing Group</h2>

<h3>“Trust me, I’m a product manager”: case study from publishing</h3>

<ul>
<li>Sales thinking: identify influencers, budget holders etc.</li>
<li>Commercial products: it&rsquo;s all about profit-and-loss. Non-commercial products
need different KPIs</li>
<li>Product manager != project manager. Responsible for:

<ul>
<li>Backlog, vision statement</li>
<li>Roadmap: what questions do we need to answer in the next windows of time</li>
</ul>
</li>
<li>&ldquo;You need to go rogue&rdquo; - prove concepts on your own without a team</li>
<li>404 test = e.g. buy now button - show it to a % of users, does nothing</li>
<li>Concierge test = build front-end, but handle the back-end manually</li>
<li>Everything in the backlog should be in line with the vision statement</li>
<li>Question for unpicking feature requests which you think might not actually
be about solving a problem: &ldquo;What happens if you <em>can&rsquo;t</em> build it?&rdquo;</li>
</ul>


<h2><a href="https://twitter.com/g_parry24/">Glyn Parry</a> – SH:24 (NHS collaboration)</h2>

<h3>How designing a new experience in the NHS helped to unblock and unleash new potential</h3>

<ul>
<li>His experience: People in localgov/NHS aren&rsquo;t familiar with agile</li>
<li>Just because they don&rsquo;t think of thinks in agile terminology doesn&rsquo;t mean
they don&rsquo;t have an agile mindset</li>
<li>Sexual health services in Lambeth&amp;Southwark are very overstretched, and in
rural areas, round-trip times to visit a clinic might be very long</li>
<li>Online STI kits - convenient but expensive</li>
<li>New service: free, user-focussed</li>
<li>User journeys illustrated with comic-strip style graphics:
<img src="https://igcdn-photos-e-a.akamaihd.net/hphotos-ak-xaf1/t51.2885-15/11055891_730864497033484_1856034297_n.jpg" alt="@g_parry_24 talking about SH:24 approach" /></li>
<li>Identify people in the organisation who have an agile mindset and are quite
influential</li>
<li>Approach: agile prototyping, building a service piece-by-piece with users</li>
<li>Developing personas</li>
<li>It&rsquo;s a digital project, but only 25% of the service being provided is
digital - needs to be recognised</li>
<li>Started with the basic GDS form</li>
<li>Prototyping the kits that people recieve - cardboard and post-its

<ul>
<li>Started out trying to design engaging packaging for the test kits</li>
<li>through user testing: learned that people don&rsquo;t want this - they like a
really simple approach</li>
</ul>
</li>
<li>Need to think about the user needs of the people receiving the tests as well</li>
<li>Continuous evaluation on multiple different angles: measuring the impact of
the service on sexual health</li>
<li>Assumptions broken: people don&rsquo;t actually want their results to be
super-discreet: they just want to know as quickly and clearly as possible</li>
<li>Prior to alpha - 3 month discovery stage: very intensive working with users</li>
</ul>


<h2><a href="https://twitter.com/thecustomer">Will Rowan</a> - Product Manager at the Ministry of Justice (interview)</h2>

<ul>
<li>Managers are more important if they have more responsibilities - therefore
they&rsquo;re predjudiced towards bigger projects and bigger products</li>
<li>PRINCE2 documentation is large regardless of project size - again
predjudicing larger projects</li>
<li>Project example: Multi-car insurance. users not considered, data produced not
considered, organisational capability to run the service, not considered
(!!)</li>
<li>On the importance of competitors: &ldquo;If you&rsquo;re trying to motivate a project team you need an enemy&rdquo;</li>
<li>&ldquo;The more that you can get product in front of people the better&rdquo; - internal
and external. The importance of show and tell. &ldquo;we can show you what&rsquo;s
possible&rdquo; - unlock stakeholder committment: low cost, low-risk &ldquo;If they can
quantify the risk they&rsquo;ll sign it off&rdquo;</li>
<li>Stakeholders probably don&rsquo;t believe that you can deliver that much in that
little time. Chip away at this by sharing what you&rsquo;re doing and how you&rsquo;re
doing it.</li>
<li>Drew the whole of a product on one A2 flipchart - helped to convince
stakeholders it&rsquo;s feasible</li>
<li>Attraction of Waterfall is that it lets you sign off the whole budget. In agile
you&rsquo;re iterating the budget as well as iterating the project</li>
<li>Getting everyone speaking the same language is important - e.g. training
stakeholders to not refer to things as &lsquo;portals&rsquo; when they&rsquo;re nothing of the
sort

<ul>
<li>If you discover that you&rsquo;ve got it wrong, or there&rsquo;s a better term, it
<em>is</em> worth changing it all the way down the stack</li>
</ul>
</li>
<li>When running agile: Make the work visible - extremely important: whole
backlog on the wall. Makes it much easier to have a common understanding.
Always carry whiteboard markers and post-its when in a non-agile environment
(you won&rsquo;t find them there).</li>
</ul>


<h2><a href="https://twitter.com/richardstobart">Richard Stobart</a> – CEO, Unboxed Consulting, Agile Coach of the Year 2014</h2>

<h3>Techniques for overcoming the Big 7 digital product blockers</h3>

<ul>
<li>The trap of 100% utilisation: Can&rsquo;t move quickly. Grind to a halt.</li>
<li>70% utilisation is about as fast as you can go: helps avoid context-switching</li>
<li>Intuitive thing when you see someone not busy is to make them busy, but this
slows down all their other projects</li>
<li>If you&rsquo;ve got spare time, help unblock <em>other people</em>, or do nothing&#8221;: don&rsquo;t
add more things to the pipeline</li>
<li>Always be delivering the highest value thing on your most important project</li>
<li>Optimise &lsquo;batch size&rsquo; - grouping together features for deploy. Small batches
= responding to change more quickly. = fixing bugs more easily: if the
problem is a result of code which was written recently, the devs have that
conceptual stack in their head.

<ul>
<li>Not achievable if your deployment process is onerous or slow</li>
</ul>
</li>
<li>People used to think of environments like pets: they all had names. Today
they&rsquo;re like cattle: set up when you need it, tear down when you&rsquo;re done.</li>
<li>rightscale + ansible + docker: used to spin up 1000 test servers to test
releasing a product to all students in China (which was the MVP!!)

<ul>
<li>Cost £10k to run that test but was trivial to set up</li>
</ul>
</li>
<li>Creating roll-back-able database migrations: dbdeploy, liquibase etc. - have
both database schema versions live in parallel, delete the old one when the
new one is stable</li>
<li>In closed-scope projects, everyone feels like they need to throw in all
their great feature ideas before the scope window closes - leads to feature
bloat. Solution: get stakeholders on side, and ensure that the product owner
controls the backlog</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/22/tim-nash-at-wordcamp-london-beyond-unit-tests/">Tim Nash at WordCamp London - Beyond Unit Tests</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-22T12:17:20+00:00" pubdate data-updated="true">Mar 22nd, 2015</time>
        
           | <a href="/blog/2015/03/22/tim-nash-at-wordcamp-london-beyond-unit-tests/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/22/tim-nash-at-wordcamp-london-beyond-unit-tests/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://london.wordcamp.org/2015/">WordCamp London</a> - live-blogging
some of the talks</em></p>

<p><a href="https://twitter.com/tnash">Tim Nash</a></p>

<ul>
<li>Strategy for handling a tight deadline: Piles of acceptance tests</li>
<li>Disagreement between different languages on what unit tests mean</li>
<li>Focus on tools and concepts not methodology</li>
<li><a href="http://codeception.com/">Codececption</a> - does a lot of things, mocking etc.
php testing framework</li>
<li>Acceptance testing: commands like <code>amOnPage</code>, <code>see</code>, <code>fillField</code></li>
<li>Define scenarios: login, fill in form and submit etc.</li>
<li>Generates reports in: console, html, xml (Ick!)</li>
<li>Can use different drivers: WebDriver (fast, headless, no js, basically does the equivalend of cURL), Selenium (Slow, but drives the actual browser: can be hard to set up), PhantomJS (headless, runs js)</li>
<li>Functional testing: sits alongside acceptance testing

<ul>
<li>Test the interactions between units - integrations</li>
<li>Ignore UI and JS - make posts directly: don&rsquo;t emulate the browser - just
call endpoints (incl. ajax) directly</li>
<li>Can also be used to test apis/rss, cli, sending email, can also test
xml-rpc</li>
</ul>
</li>
<li>We&rsquo;ll be interacting with the database, so we need to set up and tear down
data

<ul>
<li>WP-Browser handles these database interactions (i.e. you can directly
insert data)</li>
<li>Approach for setup and teardown: you can run a shell script before and
after a codeception test, so setup wp-cli scripts to do the database
setup and teardown</li>
</ul>
</li>
<li>Re-usable code in Codeception: Step objects (collections of related steps to DRY up tests?)

<ul>
<li>Helpers, Modules</li>
</ul>
</li>
<li>Refactoring strategy: Acceptance tests allow you to refactor your unit tests
with confidence, (which allows you to refactor your code with confidence)</li>
<li>Question: How to not couple the tests to e.g. the names of field names

<ul>
<li>Strategy: create a page object which wraps up those IDs, so that you
only have one point where you need to change these</li>
<li>Makes it slightly harder for non-developers to do the changes <em>(does it though??)</em>,
but makes it much more maintainable</li>
</ul>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/22/mark-jaquith-at-wordcamp-london-cache-money-business/">Mark Jaquith at WordCamp London - Cache Money Business</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-22T11:31:06+00:00" pubdate data-updated="true">Mar 22nd, 2015</time>
        
           | <a href="/blog/2015/03/22/mark-jaquith-at-wordcamp-london-cache-money-business/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/22/mark-jaquith-at-wordcamp-london-cache-money-business/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://london.wordcamp.org/2015/">WordCamp London</a> - live-blogging
some of the talks</em></p>

<p><img src="https://pbs.twimg.com/media/CAs0AgdWEAApTMb.jpg" alt="Mark Jaquith talking caching at #wcldn - photo by @davepullig on
twitter" /></p>

<p><em>photo of <a href="https://twitter.com/markjaquith">Mark Jaquith</a> by <a href="https://twitter.com/davepullig/">Dave Pullig</a></em></p>

<ul>
<li>Ultimately failing to cache could take your site down: run out of connections</li>
<li>Caching principles:

<ul>
<li>Do less work - By default WP is Totally dynamic - there&rsquo;s a lot of
complex stuff going on and it all gets done on every single request</li>
<li>Hold onto data as long as it makes sense to do so: this is very specific
to each individual site (at least for certain kinds of content)</li>
<li>Make output generic: the more specific it is to a particular user, the
less cachable it is</li>
</ul>
</li>
<li>Page caching:

<ul>
<li>Batcache - if a page gets requested more than 3 times in 3 mins it
caches that whole page for 6 mins</li>
<li>Used by WP.com</li>
<li>Unobtrusive - only caches the most frequently requested stuff</li>
<li>low-configuration</li>
</ul>
</li>
<li>W3TotalCache

<ul>
<li>Extremely complex, lots of layers</li>
</ul>
</li>
<li>WPSuperCache

<ul>
<li>Somewhere in-between</li>
</ul>
</li>
<li>Varnish or Nginx

<ul>
<li>Cache before it hits the webserver</li>
</ul>
</li>
<li>CDN

<ul>
<li>geographically distributed caches: people access the cache closest to
them</li>
<li>Very popular for media files, but can be used for the whole site.</li>
<li>Will obey cache headers</li>
</ul>
</li>
<li>Nginx Cache Purging

<ul>
<li>This is tricky</li>
<li>There&rsquo;s a third party package which can be compiled from source which
enables this. But :-P</li>
<li>Approach: Configure a &lsquo;magic header&rsquo; ;) - when it&rsquo;s passed with a
request, it skips getting, but not setting, so overwrites whatever is
currently in the cache</li>
</ul>
</li>
<li>Variable cache lengths + proactive cache refreshing:

<ul>
<li>Warm the cache (on cron) more frequently than it&rsquo;s getting expired, to
make sure that your content is always cached</li>
</ul>
</li>
<li>Does being logged-in mean you can&rsquo;t cache the page?

<ul>
<li>It&rsquo;s a pain if you have 1000&rsquo;s of logged in users/active commenters etc.</li>
<li>Think about how the page varies based on who you are logged in as:
toolbar, private posts - etc.</li>
<li>Choice: remove those things OR make them generic</li>
<li>Comment forms: hide them by default, show them with ajax - either when
hitting a button, or when scrolling to the bottom of the page (!)</li>
<li>Remove toolbar for subscribers etc. - it&rsquo;s not very useful!</li>
<li>Remove private post fucntionality if it&rsquo;s not used: it makes the queries
much more complicated anyway</li>
<li>Replace moderated comments with a generic &ldquo;your comment is being
moderated&rdquo; message</li>
</ul>
</li>
<li>Approach if you really need to show logged-in data:

<ul>
<li>Use cookies: by default WP renders user-specific content using php, but
that&rsquo;s very odd</li>
<li>Set JS-readable cookies and use them to populate the content</li>
<li>He&rsquo;s just written <a href="https://github.com/markjaquith/cache-buddy">Cache Buddy</a> - a plugin to do this</li>
</ul>
</li>
<li>Object Caching

<ul>
<li>APCu, Memcache, or (recommended:) Redis</li>
<li>put them in <code>object-cache.php</code> - they need to be loaded before plugins</li>
</ul>
</li>
<li>Transients + Object Cache

<ul>
<li>For just a few values use transients - stores data in the options table</li>
<li>For 1000s of values use the object cache</li>
<li>Object cache can organise cache keys into groups</li>
</ul>
</li>
<li>Cache stampedes: What happens when cache expires?

<ul>
<li>One user triggers the remote request</li>
<li>then the next user also triggers it (before it&rsquo;s completed)</li>
<li>and another&hellip; STAMPEDE!</li>
<li><code>tlc_transient</code> - handles this problem: soft expiration - data gets
marked as expired but not deleted until the new data is available (!)</li>
</ul>
</li>
<li>Html fragment caching

<ul>
<li>e.g. A complex footer that&rsquo;s the same on every page</li>
<li><code>CWS_Fragment_Cache</code></li>
</ul>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/21/wp-london-bruce-lawson-responsive-images/">WordCamp London - Bruce Lawson - Responsive Images</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-21T15:18:00+00:00" pubdate data-updated="true">Mar 21st, 2015</time>
        
           | <a href="/blog/2015/03/21/wp-london-bruce-lawson-responsive-images/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/21/wp-london-bruce-lawson-responsive-images/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://london.wordcamp.org/2015/">WordCamp London</a> - live-blogging
some of the talks</em></p>

<p><a href="http://www.brucelawson.co.uk/">Bruce Lawson</a></p>

<p><em>EDIT: Bruce has added some corrections and clarifications in the comments
below</em></p>

<ul>
<li>Responsiveness includes speed of loading</li>
<li>0.5 second delay is a 20% drop in traffic</li>
<li>Images are a major cause of slowing down pages</li>
<li>Av web page is 1.9MB - of which 1.2MB are images</li>
<li>Number of images loaded is static over time, but the size of images
increases significantly over time</li>
<li>How can I send huge images to retina devices, but smaller images for
rendering on smaller screens? Answer: HARD.</li>
<li>First try: use css to swap in images based on page width:

<ul>
<li>Fail: loads the retina image THEN the smaller image - i.e. downloads
both - the opposite of what we want</li>
<li>This is because CSS and JS get applied to the DOM, so the DOM needs to
get loaded first (?)</li>
<li>Browsers can create the DOM tree in whatever way they like</li>
<li>Because of preloading (&ldquo;the single greatest performance improvement
that browsers have ever made&rdquo;) The whole of the source is read before the DOM tree is loaded - as soon
as an image is spotted in the DOM, a request is sent off to fetch that
image (i.e. before the DOM tree gets constructed)</li>
<li>therefore doing things in the  CSS is too late</li>
</ul>
</li>
<li>Therefore it needs to be the markup - Media Queries have been around a long
time</li>
<li>Respimg - responsive images community group</li>
<li>First time a group of web developers wrote part of the standard and got it
into the spec</li>
<li>Now in Opera and Chrome and soon to be in Webkit</li>
<li>First use case - optimise for high dpi screeens:

<ul>
<li>srcset attribute: specify images for particular pixel densities: a
candidate list which the browser can use to select an optimal image</li>
<li>The browser gets to choose - this is so that e.g. the user can choose what
sort of image quality they wnat to have</li>
</ul>
</li>
</ul>


<p><img src="https://igcdn-photos-b-a.akamaihd.net/hphotos-ak-xaf1/t51.2885-15/11023186_1799356763623801_1327635725_n.jpg" alt="@Brucel talking responsive images" /></p>

<ul>
<li>Second use case - stretchy images

<ul>
<li>Can be done straightforwardly with css, but involves sending massive
images down the wire and putting a lot of CPU load on the browser</li>
<li>Slows things down for the user!</li>
<li>solution: w descriptor - use in src set to tell the browser which image
is more suitable for a particular page width</li>
</ul>
</li>
<li>All this requires a lot of cruft to add in all the clauses to make this work, but
there&rsquo;s a <a href="https://wordpress.org/plugins/ricg-responsive-images/">plugin from Respimg</a> which does it for you</li>
<li>Third use case - new image formats

<ul>
<li>JPG/PNG/GIF are ubiquitous, but there are more modern, better
compression alternatives: smaller files, better quality - e.g. WebP</li>
<li>Traditionally the logic is you can&rsquo;t use this in the wild because only
Chrome and Opera support it</li>
<li>with the <code>&lt;picture&gt;</code> element you can supply different image formats with
fallbacks - so e.g. you can use WebP and fall back to img (actually
browsers will force you to do progressive enhancement (supply an image)</li>
</ul>
</li>
<li>Last use case - art direction

<ul>
<li>Choose a different aspect of the image to display on different devices:
zoom in on a different bit of the image for different viewport sizes</li>
<li>Use media queries within the <code>&lt;picture&gt;</code> element to display different
versions of an image at different widths</li>
</ul>
</li>
<li>Release dates:

<ul>
<li>in OPera and Chrome now</li>
<li>FF in may</li>
<li>IE &ldquo;under consideration&rdquo; &hellip;</li>
<li>Safari already implement <code>srcset</code> - havent talked about <code>&lt;picture&gt;</code></li>
</ul>
</li>
<li>YOU CAN USE THIS NOW

<ul>
<li>It&rsquo;s designed to force progressive enhancement - nobody gets a worse
experience than they do now</li>
</ul>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/13/sandi-metz-nothing-is-something-at-bathruby/">Sandi Metz: Nothing Is Something - at BathRuby</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-13T16:38:05+00:00" pubdate data-updated="true">Mar 13th, 2015</time>
        
           | <a href="/blog/2015/03/13/sandi-metz-nothing-is-something-at-bathruby/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/13/sandi-metz-nothing-is-something-at-bathruby/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://2015.bathruby.org/">Bath Ruby 2015</a>, live blogging some of the
talks</em></p>

<ul>
<li>All of her teaching ideas have a single underlying principle</li>
<li>Learned OO from Smalltalk - massive influence on the way she thinks about
objects</li>
<li><code>+</code> is just a method on <code>Fixnum</code></li>
<li>Ruby&rsquo;s <code>if</code> is effectively a typecheck (a check of whether an object is a
member of <code>NilClass</code>/<code>Trueclass</code> ??)

<ul>
<li><code>if</code> is very prodedural (not OO)</li>
</ul>
</li>
<li>Sometimes <code>nil</code> means nothing - so just remove nils from your results (e.g.
<code>compact</code> the array</li>
<li><code>try</code> can effectively be a typecheck (for <code>NilClass</code>)</li>
<li>Conditions breed: if you have one you&rsquo;ll get more. Making a change around
them in one place may involve making changes in lots of places (&ldquo;shotgun
surgery&rdquo;)</li>
<li>If you return nil then calls to that object can return objects which respond
to different Apis: The object&rsquo;s or NilClass&rsquo;s. Solution: Null Object Pattern
(#ftw)</li>
<li>Null Object is for when Nothing is actually a thing - for when you need to
talk to it</li>
<li>Null Object is a new dependency, so wrap it in a new class which returns
either an instance of your Object, or the Null Object, then pass this new
class around</li>
<li>Null Object is a concrete implementation of a more general idea</li>
<li>Single responsibilities allow you to override specific behaviours when
inheriting</li>
<li>Extending behaviour by inheritance makes it impossible to share multiple
behaviours</li>
<li>Inheritance is for specialisation (not for ??)

<ul>
<li>There&rsquo;s no such thing as just one specialisation&hellip;</li>
</ul>
</li>
<li>Approach - Composition and dependecy injection:

<ol>
<li>make the original behaviour and the new behaviour look the same - this
highlights the way they&rsquo;re different</li>
<li>Give the new behaviour a name - this helps work out what&rsquo;s being applied
to the original object</li>
<li>Inject an object which represents the behaviour</li>
</ol>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/13/tom-stuart-a-lever-for-the-mind-at-bathruby/">Tom Stuart - &#8216;a Lever for the Mind&#8217; at BathRuby</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-13T14:53:54+00:00" pubdate data-updated="true">Mar 13th, 2015</time>
        
           | <a href="/blog/2015/03/13/tom-stuart-a-lever-for-the-mind-at-bathruby/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/13/tom-stuart-a-lever-for-the-mind-at-bathruby/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://2015.bathruby.org/">Bath Ruby 2015</a>, live blogging some of the
talks</em></p>

<p><img src="https://pbs.twimg.com/media/B__KM61WQAAyEr9.jpg:medium" alt="Slide photo by @trailsuite" /></p>

<p><em>Photo by <a href="https://twitter.com/trailsuite">@trailsuite</a></em></p>

<ul>
<li>Brains are just not very good at working with several complex ideas
concurrently</li>
<li>Abstraction is our solution to this</li>
<li>Numbers are a <em>property</em> of sets (?) of things. It doesn&rsquo;t matter how we
arrange the things, or how big they are</li>
<li>We build other concepts on top of our idea of number: e.g. successor - a way
to generate new numbers. gt/lt can be built from the idea of successors</li>
<li>These abstractions allow us to predict what would happen in reality when
certain actions occur: we can do the &lsquo;work&rsquo; in the &lsquo;abstract world&rsquo; rather
than doing it in the real world and observing the result.</li>
<li>Recognise patterns. Some patterns can be generalised to apply to whole
classes of items (e.g. all natural numbers)</li>
<li>You don&rsquo;t need to remember the details of <em>why</em> a particular formula works:
it doesn&rsquo;t matter: you can use it without understanding why it&rsquo;s true</li>
<li>A <em>walk</em> across a graph is a sequence of visits from node to node along
their adjacent edges</li>
<li>A <em>connected graph</em> is one where there exists a walk between any pair of notes</li>
<li>A <em>trail</em> is a walk which doesn&rsquo;t repeat traversing edges</li>
<li>An <em>Euleurian trail</em> is a walk which visits every node and uses every edge</li>
<li>Mathematics: &ldquo;spot patterns, build reusable abstractions&rdquo;</li>
<li>Abstractions help us take complex things from the real world and reconstruct
them in our heads so that we cal (?reason about them?)</li>
<li>Idea of the <em>honest</em> abstraction - the one which &lsquo;honestly&rsquo; models your
problem.</li>
<li>The <em>minimal</em> abstraction: start from nothing and only add the
behaviours/ideas/operations which are strictly necessary</li>
<li>&ldquo;the most exciting thing you can do with your brain is to strap it into the
hulking exoskeleton of mathematics&rdquo;</li>
<li>If you can write a program, you&rsquo;re good at mathematics</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/13/katrina-owen-at-bathruby-here-be-dragons/">Katrina Owen at BathRuby: Here Be Dragons</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-13T14:00:28+00:00" pubdate data-updated="true">Mar 13th, 2015</time>
        
           | <a href="/blog/2015/03/13/katrina-owen-at-bathruby-here-be-dragons/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/13/katrina-owen-at-bathruby-here-be-dragons/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://2015.bathruby.org/">Bath Ruby 2015</a>, live blogging some of the
talks</em></p>

<p><img src="https://pbs.twimg.com/media/B_-97ueWAAAnsGS.jpg" alt="photo by
@Naomi_Freeman" /></p>

<p><em>Photo by <a href="https://twitter.com/Naomi_Freeman">@Naomi_Freeman</a></em></p>

<ul>
<li>Some bugs are admirable. Squashing them makes you feel victorious</li>
<li>Squashing the bug isn&rsquo;t enough: if you don&rsquo;t clear up the root issues, it
will just cause you future pain - cleaning up the mess.</li>
<li>Fundamental attribution error: assume that bad code means a bad
person/unskilled developer (other people), or assume that they were having a bad day (our
friends)</li>
<li>Prisoner&rsquo;s dilemna as a metaphor for the choice of whether to follow good
practices

<ul>
<li>The rational choice is to always &lsquo;defect&rsquo; - but everyone loses.</li>
<li>The way to maximise the overall result for people is for everyone to
cooperate (add tests, improve error handling, extract responsibilities)</li>
<li>only works if everyone is on board: one person &lsquo;defecting&rsquo; will mess it up
for everyone</li>
</ul>
</li>
<li>Every commit we make tips the balance in one direction or the other: towards
entropy or order</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/13/live-coding-music-at-bathruby/">Live-coding Music at BathRuby</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-03-13T12:34:18+00:00" pubdate data-updated="true">Mar 13th, 2015</time>
        
           | <a href="/blog/2015/03/13/live-coding-music-at-bathruby/#disqus_thread"
             data-disqus-identifier="http://dgmstuart.github.io/blog/2015/03/13/live-coding-music-at-bathruby/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>I&rsquo;m at <a href="http://2015.bathruby.org/">Bath Ruby 2015</a>, live blogging some of the
talks</em></p>

<p>Amazing demo of using <a href="http://sonic-pi.net/">Sonic-pi</a> to make music live:
by <a href="https://twitter.com/xavriley">Xavier Riley</a></p>

<iframe src="https://vine.co/v/O9jBg0wY3Ti/embed/simple" width="600"
height="600" frameborder="0"></iframe>


<p><script
src="https://platform.vine.co/static/scripts/embed.js"></script></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
   
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:dgmstuart.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/03/27/some-tools-for-faster-blogging-in-octopress/">Some Tools for Faster Blogging in Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/27/execute-ruby-code-inline-in-the-editor/">Execute Ruby Code Inline in the Editor</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/25/unboxed-event-notes/">Unboxed Event Notes: &#8220;Unstick Your Digital Products&#8221;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/22/tim-nash-at-wordcamp-london-beyond-unit-tests/">Tim Nash at WordCamp London - Beyond Unit Tests</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/22/mark-jaquith-at-wordcamp-london-cache-money-business/">Mark Jaquith at WordCamp London - Cache Money Business</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/dgmstuart">@dgmstuart</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dgmstuart',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Duncan Stuart -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dgmscode';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script>
  $(document).ready(function() {  
  var stickyNavTop = $('nav').offset().top;  
    
  var stickyNav = function(){  
  var scrollTop = $(window).scrollTop();  
         
  if (scrollTop > stickyNavTop) {   
      $('nav').addClass('sticky');  
  } else {  
      $('nav').removeClass('sticky');   
  }  
  };  
    
  stickyNav();  
    
  $(window).scroll(function() {  
      stickyNav();  
  });  
  });  
</script>


</body>
</html>
